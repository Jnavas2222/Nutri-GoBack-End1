"use strict";(self.webpackChunkmi_web_app=self.webpackChunkmi_web_app||[]).push([[384],{9384:(j,b,s)=>{s.r(b),s.d(b,{InventProductoRModule:()=>f});var c=s(6895),u=s(9299),e=s(4650),_=s(4859),C=s(5412);function T(i,t){}class p{constructor(){}static#e=this.\u0275fac=function(n){return new(n||p)};static#t=this.\u0275cmp=e.Xpm({type:p,selectors:[["app-borrar"]],decls:13,vars:2,consts:[[1,"p-4"],[1,"text-xl","font-semibold","mb-4"],[1,"botones-container"],[1,"text-center","text-2xl","font-bold","mb-8"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["noFile",""]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Borrar Inventario"),e.qZA(),e.TgZ(3,"div",2)(4,"h3",3),e._uU(5,"\xbfSeguro que quieres borrar el inventaro?"),e.qZA(),e.TgZ(6,"mat-dialog-actions")(7,"button",4),e._uU(8,"No"),e.qZA(),e.TgZ(9,"button",5),e._uU(10,"Si"),e.qZA()(),e.YNc(11,T,0,0,"ng-template",null,6,e.W1O),e.qZA()()),2&n&&(e.xp6(7),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[_.lW,C.ZT,C.H8],styles:['@charset "UTF-8";.custom-primary-button[_ngcontent-%COMP%]{background-color:#005e6e;color:#fff;font-weight:700;padding:.5rem 1rem;border-radius:.25rem;margin-left:10px}.botones-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.botones-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:10px}']})}var O=s(4410),x=s(7392),m=s(9549),I=s(4385),Z=s(3238);function P(i,t){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){const n=t.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.label," ")}}function A(i,t){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){const n=t.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.nombre," ")}}function F(i,t){if(1&i){const n=e.EpF();e.TgZ(0,"div")(1,"mat-form-field",3)(2,"mat-select",13),e.NdJ("valueChange",function(a){e.CHM(n);const r=e.oxw();return e.KtG(r.selectedOption2=a)}),e.YNc(3,A,2,2,"mat-option",5),e.qZA()()()}if(2&i){const n=e.oxw();e.xp6(2),e.Q6J("value",n.selectedOption2),e.xp6(1),e.Q6J("ngForOf",n.data2)}}function y(i,t){if(1&i){const n=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td")(10,"button",14),e.NdJ("click",function(){const r=e.CHM(n).$implicit,d=e.oxw();return e.KtG(d.openConfirmarDialog(r.producto.id,r.inventario.id))}),e.TgZ(11,"mat-icon"),e._uU(12,"delete"),e.qZA()()()()}if(2&i){const n=t.$implicit;let o,a;e.xp6(2),e.Oqu(n.id),e.xp6(2),e.Oqu(n.cantidad),e.xp6(2),e.Oqu(null!==(o=null==n.inventario?null:n.inventario.nombre)&&void 0!==o?o:"N/A"),e.xp6(2),e.Oqu(null!==(a=null==n.producto?null:n.producto.nombre)&&void 0!==a?a:"N/A")}}class v{constructor(t,n,o){this.seguridadService=t,this.router=n,this.dialog=o,this.options=[{value:0,label:"Todo"},{value:1,label:"Producto"},{value:2,label:"Inventario"}],this.selectedOption=-1,this.selectedOption2=0,this.data=[],this.data2=[],this.filteredOptions=[]}ngOnInit(){this.seguridadService.mantenerSecion(),this.seguridadService.tieneprivilegio(),this.seguridadService.obtenerInventarioPresente().subscribe(t=>{this.data=t},t=>{console.error("Error obteniendo data:",t)})}onFirstListChange(){this.filteredOptions=[],1===this.selectedOption?this.data.forEach(t=>{null!==t.product&&this.filteredOptions.push(t.producto)}):2===this.selectedOption&&this.data.forEach(t=>{null!==t.inventario&&this.filteredOptions.push(t.inventario)}),this.filteredOptions=Array.from(new Set(this.filteredOptions.map(t=>t.id))).map(t=>this.filteredOptions.find(n=>n.id===t)),this.data2=this.filteredOptions}actualizarLista(){0==this.selectedOption?this.seguridadService.obtenerInventarioPresente().subscribe(t=>{this.data=t},t=>{console.error("Error obteniendo data:",t)}):1==this.selectedOption?this.seguridadService.obtenerInventarioPresenteProducto({id:this.selectedOption2,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(t=>{this.data=t},t=>{console.error("Error obteniendo data:",t)}):2==this.selectedOption&&this.seguridadService.obtenerInventarioPresenteInventario({id:this.selectedOption2,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(t=>{this.data=t},t=>{console.error("Error obteniendo data:",t)})}openConfirmarDialog(t,n){this.dialog.open(p).afterClosed().subscribe(a=>{a&&(this.seguridadService.BorrarInventarioProducto({producto:t,inventario:n,user:this.seguridadService.getCookie("username")??"nada"}),window.location.reload())})}static#e=this.\u0275fac=function(n){return new(n||v)(e.Y36(O.F),e.Y36(u.F0),e.Y36(C.uw))};static#t=this.\u0275cmp=e.Xpm({type:v,selectors:[["app-inventario"]],decls:31,vars:4,consts:[[1,"p-4"],[1,"text-xl","font-semibold","mb-4"],[1,"table-container"],[1,"w-full",2,"width","200px"],["placeholder","Opciones",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex"],["mat-raised-button","","color","primary","type","submit",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[1,"botones-containerA"],["routerLink","/transaccion/crear","mat-raised-button","",1,"crear"],[4,"ngFor","ngForOf"],[3,"value"],["placeholder","Opciones",3,"value","valueChange"],["mat-raised-button","",1,"borrar",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Panel De Administraci\xf3n de Inventarios Actuales"),e.qZA(),e.TgZ(3,"div",2)(4,"div")(5,"mat-form-field",3)(6,"mat-select",4),e.NdJ("valueChange",function(r){return o.selectedOption=r})("selectionChange",function(){return o.onFirstListChange()}),e.YNc(7,P,2,2,"mat-option",5),e.qZA()()(),e.YNc(8,F,4,2,"div",6),e.TgZ(9,"div",7)(10,"button",8),e.NdJ("click",function(){return o.actualizarLista()}),e._uU(11," Buscar "),e.qZA()(),e._UZ(12,"br"),e.TgZ(13,"div",9)(14,"button",10),e._uU(15," Crear "),e.qZA()(),e.TgZ(16,"table")(17,"thead")(18,"tr")(19,"th"),e._uU(20,"C\xf3digo"),e.qZA(),e.TgZ(21,"th"),e._uU(22,"Cantidad actual"),e.qZA(),e.TgZ(23,"th"),e._uU(24,"Nombre del Inventario"),e.qZA(),e.TgZ(25,"th"),e._uU(26,"Nombre del producto"),e.qZA(),e.TgZ(27,"th"),e._uU(28,"Acciones"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,y,13,4,"tr",11),e.qZA()()()()),2&n&&(e.xp6(6),e.Q6J("value",o.selectedOption),e.xp6(1),e.Q6J("ngForOf",o.options),e.xp6(1),e.Q6J("ngIf",o.selectedOption>0&&null!==o.selectedOption),e.xp6(22),e.Q6J("ngForOf",o.data))},dependencies:[c.sg,c.O5,u.rH,_.lW,x.Hw,m.KE,I.gD,Z.ey],styles:[".primary-color[_ngcontent-%COMP%]{color:#005e6e}.border-color[_ngcontent-%COMP%]{border-color:#005e6e}.titulo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f2f2f2}td[_ngcontent-%COMP%]{background-color:#fff}"]})}var S=s(4144),J=s(3546),l=s(4006);function q(i,t){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){const n=t.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.label," ")}}function w(i,t){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){const n=t.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.nombre," ")}}function U(i,t){if(1&i){const n=e.EpF();e.TgZ(0,"div")(1,"mat-form-field",10)(2,"mat-select",18),e.NdJ("valueChange",function(a){e.CHM(n);const r=e.oxw();return e.KtG(r.selectedOptionInvent=a)})("selectionChange",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.onInvListChange())}),e.YNc(3,w,2,2,"mat-option",8),e.qZA()()()}if(2&i){const n=e.oxw();e.xp6(2),e.Q6J("value",n.selectedOptionInvent),e.xp6(1),e.Q6J("ngForOf",n.datainvent)}}function M(i,t){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){const n=t.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.nombre," ")}}function Q(i,t){if(1&i){const n=e.EpF();e.TgZ(0,"div")(1,"mat-form-field",10)(2,"mat-select",19),e.NdJ("valueChange",function(a){e.CHM(n);const r=e.oxw();return e.KtG(r.selectedOptionInvsal=a)})("selectionChange",function(){e.CHM(n);const a=e.oxw();return e.KtG(a.onInvListChange())}),e.YNc(3,M,2,2,"mat-option",8),e.qZA()()()}if(2&i){const n=e.oxw();e.xp6(2),e.Q6J("value",n.selectedOptionInvsal),e.xp6(1),e.Q6J("ngForOf",n.datainvsal)}}function N(i,t){if(1&i&&(e.TgZ(0,"mat-option",17),e._uU(1),e.qZA()),2&i){const n=t.$implicit;e.Q6J("value",n.id),e.xp6(1),e.hij(" ",n.nombre," ")}}class g{constructor(t){this.seguridadService=t,this.options=[{value:"0",label:"Compra de producto"},{value:"1",label:"Transferencia de producto"},{value:"2",label:"Venta de producto"}],this.selectedOption=0,this.selectedOptionProd=0,this.selectedOptionInvent=0,this.selectedOptionInvsal=0,this.dataprod=[],this.datainvent=[],this.datainvsal=[],this.filteredOptions=[]}ngOnInit(){this.seguridadService.mantenerSecion(),this.seguridadService.tieneprivilegio()}onFirstListChange(){this.dataprod=[],this.datainvent=[],this.datainvsal=[],this.filteredOptions=[],0==this.selectedOption?(this.seguridadService.obtenerProducto().subscribe(t=>{this.dataprod=t},t=>{console.error("Error obteniendo data:",t)}),this.seguridadService.obtenerInventario().subscribe(t=>{this.datainvent=t},t=>{console.error("Error obteniendo data:",t)})):1==this.selectedOption?this.seguridadService.obtenerInventario().subscribe(t=>{this.datainvent=t},t=>{console.error("Error obteniendo data:",t)}):2==this.selectedOption&&this.seguridadService.obtenerInventario().subscribe(t=>{this.datainvsal=t},t=>{console.error("Error obteniendo data:",t)}),this.filteredOptions=Array.from(new Set(this.filteredOptions.map(t=>t.id))).map(t=>this.filteredOptions.find(n=>n.id===t))}onInvListChange(){1==this.selectedOption?(this.seguridadService.obtenerInventario().subscribe(t=>{this.datainvsal=t.filter(o=>o.id!==this.selectedOptionInvent)},t=>{console.error("Error obteniendo data:",t)}),this.seguridadService.obtenerInventarioPresenteInventario({id:this.selectedOptionInvent,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(t=>{const n=t.map(o=>o.producto).filter((o,a,r)=>a===r.findIndex(d=>d.id===o.id));this.dataprod=n})):2==this.selectedOption&&this.seguridadService.obtenerInventarioPresenteInventario({id:this.selectedOptionInvsal,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(t=>{const n=t.map(o=>o.producto).filter((o,a,r)=>a===r.findIndex(d=>d.id===o.id));this.dataprod=n})}guardar(t){0==this.selectedOption?this.seguridadService.CompraProducto({producto:this.selectedOptionProd,inventarioid:this.selectedOptionInvent,cantidad:t.value.cantidad,user:this.seguridadService.getCookie("username")??"nada",descripcion:"Compra: "+t.value.descripcion}):1==this.selectedOption?this.seguridadService.TransferenciaProducto({producto:this.selectedOptionProd,inventario:this.selectedOptionInvent,inventario2:this.selectedOptionInvsal,cantidad:t.value.cantidad,user:this.seguridadService.getCookie("username")??"nada",descripcion:"Transferencia: "+t.value.descripcion}):2==this.selectedOption&&this.seguridadService.VentaProducto({producto:this.selectedOptionProd,inventario:this.selectedOptionInvsal,cantidad:t.value.cantidad,user:this.seguridadService.getCookie("username")??"nada",descripcion:"Venta: "+t.value.descripcion})}static#e=this.\u0275fac=function(n){return new(n||g)(e.Y36(O.F))};static#t=this.\u0275cmp=e.Xpm({type:g,selectors:[["app-CrearInventario"]],decls:35,vars:7,consts:[[1,"flex","justify-center","items-center","h-screen"],[1,"max-w-md","w-full"],[1,"shadow-md","rounded","px-8","pt-6","pb-8","mb-4"],[1,"titulo-grande"],[1,"flex","flex-col","items-center",3,"ngSubmit"],["f","ngForm"],[1,"w-full"],["placeholder","Tipo de Transacci\xf3n",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"w-full",2,"width","200px"],["placeholder","Opciones productos",3,"value","valueChange"],[1,"mb-4","w-full"],["matInput","","type","number","placeholder","Ingrese la cantidad","ngModel","","name","cantidad","required","","min","1",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],["matInput","","type","text","placeholder","Ingrese Descripci\xf3n","ngModel","","name","descripcion","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"flex","items-center","justify-center"],["mat-raised-button","","color","primary","type","submit",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"disabled"],[3,"value"],["placeholder","Opciones entrada",3,"value","valueChange","selectionChange"],["placeholder","Opciones salida",3,"value","valueChange","selectionChange"]],template:function(n,o){if(1&n){const a=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"mat-card",2)(3,"div")(4,"h1",3),e._uU(5,"Transferencia de Productos"),e.qZA()(),e.TgZ(6,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(a);const d=e.MAs(7);return e.KtG(o.guardar(d))}),e.TgZ(8,"div")(9,"mat-form-field",6)(10,"mat-select",7),e.NdJ("valueChange",function(d){return o.selectedOption=d})("selectionChange",function(){return o.onFirstListChange()}),e.YNc(11,q,2,2,"mat-option",8),e.qZA()()(),e.YNc(12,U,4,2,"div",9),e.YNc(13,Q,4,2,"div",9),e.TgZ(14,"div")(15,"mat-form-field",10)(16,"mat-select",11),e.NdJ("valueChange",function(d){return o.selectedOptionProd=d}),e.YNc(17,N,2,2,"mat-option",8),e.qZA()()(),e.TgZ(18,"div",12)(19,"mat-form-field",6)(20,"mat-label"),e._uU(21,"Cantidad"),e.qZA(),e._UZ(22,"input",13),e.TgZ(23,"mat-error"),e._uU(24,"Ingrese la cantidad"),e.qZA()()(),e.TgZ(25,"div",12)(26,"mat-form-field",6)(27,"mat-label"),e._uU(28,"Descripci\xf3n"),e.qZA(),e._UZ(29,"input",14),e.TgZ(30,"mat-error"),e._uU(31,"Ingrese una descripci\xf3n"),e.qZA()()(),e.TgZ(32,"div",15)(33,"button",16),e._uU(34," Guardar "),e.qZA()()()()()()}if(2&n){const a=e.MAs(7);e.xp6(10),e.Q6J("value",o.selectedOption),e.xp6(1),e.Q6J("ngForOf",o.options),e.xp6(1),e.Q6J("ngIf",o.selectedOption>=0&&o.selectedOption<=1&&null!==o.selectedOption),e.xp6(1),e.Q6J("ngIf",o.selectedOption>=1&&o.selectedOption<=2&&null!==o.selectedOption),e.xp6(3),e.Q6J("value",o.selectedOptionProd),e.xp6(1),e.Q6J("ngForOf",o.dataprod),e.xp6(16),e.Q6J("disabled",!o.selectedOption&&!o.selectedOptionProd&&(!o.selectedOptionInvent||!o.selectedOptionInvsal)||a.invalid)}},dependencies:[c.sg,c.O5,_.lW,S.Nt,m.KE,m.hX,m.TO,J.a8,I.gD,Z.ey,l._Y,l.Fj,l.wV,l.JJ,l.JL,l.Q7,l.qQ,l.On,l.F],styles:["mat-icon-button[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%)}.password-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-input[_ngcontent-%COMP%]{width:calc(100% - 48px);height:100%;padding:0 12px}.visibility-toggle[_ngcontent-%COMP%]{position:absolute;right:0;top:0;width:48px;height:100%;display:flex;align-items:center;justify-content:center;padding:0}"]})}const E=[{path:"",children:[{path:"admin",component:v},{path:"crear",component:g},{path:"**",redirectTo:"login"}]}];class h{static#e=this.\u0275fac=function(n){return new(n||h)};static#t=this.\u0275mod=e.oAB({type:h});static#n=this.\u0275inj=e.cJS({imports:[u.Bz.forChild(E),u.Bz]})}var Y=s(381);class f{static#e=this.\u0275fac=function(n){return new(n||f)};static#t=this.\u0275mod=e.oAB({type:f});static#n=this.\u0275inj=e.cJS({imports:[c.ez,h,Y.q,l.u5]})}}}]);