"use strict";(self.webpackChunkmi_web_app=self.webpackChunkmi_web_app||[]).push([[941],{7941:(B,S,l)=>{l.r(S),l.d(S,{SugerenciaRModule:()=>C});var u=l(6895),p=l(9299),e=l(4650),O=l(4410),g=l(4859);function A(o,n){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA()()),2&o){const t=n.$implicit;let i,r;e.xp6(2),e.Oqu(null!==(i=null==t.inventario?null:t.inventario.nombre)&&void 0!==i?i:"N/A"),e.xp6(2),e.Oqu(null!==(r=null==t.producto?null:t.producto.nombre)&&void 0!==r?r:"N/A"),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(t.estado)}}class m{constructor(n){this.seguridadService=n,this.selectedOption=-1,this.selectedOption2=0,this.data=[]}ngOnInit(){this.seguridadService.mantenerSecion(),this.seguridadService.obtenerSugerencias().subscribe(n=>{const t=this.seguridadService.getCookie("username");this.data=n.filter(i=>i.usuario.email===t)},n=>{console.error("Error obteniendo data:",n)})}static#e=this.\u0275fac=function(t){return new(t||m)(e.Y36(O.F))};static#t=this.\u0275cmp=e.Xpm({type:m,selectors:[["app-inventario"]],decls:20,vars:1,consts:[[1,"p-4"],[1,"text-xl","font-semibold","mb-4"],[1,"table-container"],[1,"botones-containerA"],["routerLink","/sugerencia/crear","mat-raised-button","",1,"crear"],[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Mis Sugerencias"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"button",4),e._uU(6," Crear "),e.qZA()(),e.TgZ(7,"table")(8,"thead")(9,"tr")(10,"th"),e._uU(11,"M\xe1quina Dispensadora"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Producto"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Descripci\xf3n"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Estado"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,A,9,4,"tr",5),e.qZA()()()()),2&t&&(e.xp6(19),e.Q6J("ngForOf",i.data))},dependencies:[u.sg,p.rH,g.lW],styles:[".primary-color[_ngcontent-%COMP%]{color:#005e6e}.border-color[_ngcontent-%COMP%]{border-color:#005e6e}.titulo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f2f2f2}td[_ngcontent-%COMP%]{background-color:#fff}"]})}var Z=l(5412);function q(o,n){}class f{constructor(){}static#e=this.\u0275fac=function(t){return new(t||f)};static#t=this.\u0275cmp=e.Xpm({type:f,selectors:[["app-borrar"]],decls:13,vars:2,consts:[[1,"p-4"],[1,"text-xl","font-semibold","mb-4"],[1,"botones-container"],[1,"text-center","text-2xl","font-bold","mb-8"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["noFile",""]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Borrar Inventario"),e.qZA(),e.TgZ(3,"div",2)(4,"h3",3),e._uU(5,"\xbfSeguro que quieres borrar la sugerencia?"),e.qZA(),e.TgZ(6,"mat-dialog-actions")(7,"button",4),e._uU(8,"No"),e.qZA(),e.TgZ(9,"button",5),e._uU(10,"Si"),e.qZA()(),e.YNc(11,q,0,0,"ng-template",null,6,e.W1O),e.qZA()()),2&t&&(e.xp6(7),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[g.lW,Z.ZT,Z.H8],styles:['@charset "UTF-8";.custom-primary-button[_ngcontent-%COMP%]{background-color:#005e6e;color:#fff;font-weight:700;padding:.5rem 1rem;border-radius:.25rem;margin-left:10px}.botones-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.botones-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:10px}']})}var F=l(7392),h=l(9549),x=l(4385),T=l(3238);function y(o,n){if(1&o&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function U(o,n){if(1&o&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function P(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-form-field",3)(2,"mat-select",11),e.NdJ("valueChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedOption2=r)}),e.YNc(3,U,2,2,"mat-option",5),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("value",t.selectedOption2),e.xp6(1),e.Q6J("ngForOf",t.data2)}}function J(o,n){if(1&o&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function M(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"mat-form-field",3)(2,"mat-select",11),e.NdJ("valueChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.selectedOptionString=r)}),e.YNc(3,J,2,2,"mat-option",5),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("value",t.selectedOptionString),e.xp6(1),e.Q6J("ngForOf",t.data2)}}function N(o,n){if(1&o&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function I(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td")(14,"mat-form-field",3)(15,"mat-select",4),e.NdJ("valueChange",function(r){const s=e.CHM(t).$implicit;return e.KtG(s.selectedOption3=r)})("selectionChange",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.onStatusListChange(a.id,a.selectedOption3))}),e.YNc(16,N,2,2,"mat-option",5),e.qZA()(),e.TgZ(17,"button",12),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.openConfirmarDialog(a.producto.id,a.inventario.id,a.usuario.email))}),e.TgZ(18,"mat-icon"),e._uU(19,"delete"),e.qZA()()()()}if(2&o){const t=n.$implicit,i=e.oxw();let r,a,s,d;e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(null!==(r=null==t.inventario?null:t.inventario.nombre)&&void 0!==r?r:"N/A"),e.xp6(2),e.Oqu(null!==(a=null==t.producto?null:t.producto.nombre)&&void 0!==a?a:"N/A"),e.xp6(2),e.Oqu(null!==(s=null==t.usuario?null:t.usuario.nombre)&&void 0!==s?s:"N/A"),e.xp6(2),e.Oqu(t.descripcion),e.xp6(2),e.Oqu(null!==(d=t.estado)&&void 0!==d?d:"N/A"),e.xp6(3),e.Q6J("value",t.selectedOption3),e.xp6(1),e.Q6J("ngForOf",i.optionsStatus)}}class _{constructor(n,t,i){this.seguridadService=n,this.router=t,this.dialog=i,this.options=[{value:0,label:"Todo"},{value:1,label:"Producto"},{value:2,label:"Inventario"},{value:3,label:"Estado"}],this.optionsStatus=[{value:0,label:"Pendiente"},{value:1,label:"Aceptado"},{value:2,label:"Denegado"}],this.selectedOption=-1,this.selectedOption2=0,this.selectedOptionString="",this.selectedOption3=-1,this.data=[],this.data2=[],this.filteredOptions=[]}ngOnInit(){this.seguridadService.mantenerSecion(),this.seguridadService.tieneprivilegio(),this.seguridadService.obtenerSugerencias().subscribe(n=>{this.data=n},n=>{console.error("Error obteniendo data:",n)})}onFirstListChange(){this.filteredOptions=[],1===this.selectedOption?this.data.forEach(n=>{null!==n.product&&(this.filteredOptions.push(n.producto),this.filteredOptions=Array.from(new Set(this.filteredOptions.map(t=>t.id))).map(t=>this.filteredOptions.find(i=>i.id===t)))}):2===this.selectedOption?this.data.forEach(n=>{null!==n.inventario&&(this.filteredOptions.push(n.inventario),this.filteredOptions=Array.from(new Set(this.filteredOptions.map(t=>t.id))).map(t=>this.filteredOptions.find(i=>i.id===t)))}):3===this.selectedOption&&this.data.forEach(n=>{null!==n.estado&&this.filteredOptions.push(n.estado)}),this.data2=this.filteredOptions}actualizarLista(){if(0==this.selectedOption)this.seguridadService.obtenerSugerencias().subscribe(t=>{this.data=t},t=>{console.error("Error obteniendo data:",t)});else if(1==this.selectedOption)this.seguridadService.obtenerSugerenciasProducto({id:this.selectedOption2,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(t=>{this.data=t},t=>{console.error("Error obteniendo data:",t)});else if(2==this.selectedOption)this.seguridadService.obtenerSugerenciasInventario({id:this.selectedOption2,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(t=>{this.data=t},t=>{console.error("Error obteniendo data:",t)});else if(3==this.selectedOption){var n=0;"PENDIENTE"==this.selectedOptionString?n=0:"ACEPTADO"==this.selectedOptionString?n=1:"DENEGADO"==this.selectedOptionString&&(n=2),this.seguridadService.obtenerSugerenciasEstado({id:n,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(t=>{this.data=t},t=>{console.error("Error obteniendo data:",t)})}}onStatusListChange(n,t){console.log(n+" "+t),this.seguridadService.modificarSugerenciasEstado({id:n,estado:t,user:this.seguridadService.getCookie("username")??"nada"})}openConfirmarDialog(n,t,i){this.dialog.open(f).afterClosed().subscribe(a=>{a&&(this.seguridadService.BorrarSugerencia({producto:n,inventario:t,user:i}),window.location.reload())})}static#e=this.\u0275fac=function(t){return new(t||_)(e.Y36(O.F),e.Y36(p.F0),e.Y36(Z.uw))};static#t=this.\u0275cmp=e.Xpm({type:_,selectors:[["app-inventario"]],decls:32,vars:5,consts:[[1,"p-4"],[1,"text-xl","font-semibold","mb-4"],[1,"table-container"],[1,"w-full",2,"width","200px"],["placeholder","Opciones",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex"],["mat-raised-button","","color","primary","type","submit",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[4,"ngFor","ngForOf"],[3,"value"],["placeholder","Opciones",3,"value","valueChange"],["mat-raised-button","",1,"borrar",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2,"Panel De Administraci\xf3n de Sugerencias"),e.qZA(),e.TgZ(3,"div",2)(4,"div")(5,"mat-form-field",3)(6,"mat-select",4),e.NdJ("valueChange",function(a){return i.selectedOption=a})("selectionChange",function(){return i.onFirstListChange()}),e.YNc(7,y,2,2,"mat-option",5),e.qZA()()(),e.YNc(8,P,4,2,"div",6),e.YNc(9,M,4,2,"div",6),e.TgZ(10,"div",7)(11,"button",8),e.NdJ("click",function(){return i.actualizarLista()}),e._uU(12," Buscar "),e.qZA()(),e.TgZ(13,"table")(14,"thead")(15,"tr")(16,"th"),e._uU(17,"C\xf3digo"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Nombre del Inventario"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Nombre del producto"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Usuario"),e.qZA(),e.TgZ(24,"th"),e._uU(25,"Descripci\xf3n"),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Estado"),e.qZA(),e.TgZ(28,"th"),e._uU(29,"Acciones"),e.qZA()()(),e.TgZ(30,"tbody"),e.YNc(31,I,20,8,"tr",9),e.qZA()()()()),2&t&&(e.xp6(6),e.Q6J("value",i.selectedOption),e.xp6(1),e.Q6J("ngForOf",i.options),e.xp6(1),e.Q6J("ngIf",i.selectedOption>0&&i.selectedOption<=2&&null!==i.selectedOption),e.xp6(1),e.Q6J("ngIf",i.selectedOption>2&&null!==i.selectedOption),e.xp6(22),e.Q6J("ngForOf",i.data))},dependencies:[u.sg,u.O5,g.lW,F.Hw,h.KE,x.gD,T.ey],styles:[".primary-color[_ngcontent-%COMP%]{color:#005e6e}.border-color[_ngcontent-%COMP%]{border-color:#005e6e}.titulo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f2f2f2}td[_ngcontent-%COMP%]{background-color:#fff}td[_ngcontent-%COMP%]:not(:has(button)){border:1px solid black}"]})}var w=l(4144),Q=l(3546),c=l(4006);function E(o,n){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}function Y(o,n){if(1&o&&(e.TgZ(0,"mat-option",15),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.nombre," ")}}class v{constructor(n){this.seguridadService=n,this.options=[{value:"0",label:"Compra de producto"},{value:"1",label:"Transferencia de producto"},{value:"2",label:"Venta de producto"}],this.selectedOption=0,this.selectedOptionProd=0,this.selectedOptionInvent=0,this.selectedOptionInvsal=0,this.dataprod=[],this.datainv=[],this.filteredOptions=[]}ngOnInit(){this.seguridadService.mantenerSecion(),this.seguridadService.obtenerInventarioFiltrado({id:0}).subscribe(n=>{this.datainv=n},n=>{console.error("Error obteniendo data:",n)})}onInvListChange(){this.seguridadService.obtenerProducto().subscribe(n=>{const t=n;this.seguridadService.obtenerInventarioPresenteInventario({id:this.selectedOptionInvent,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(i=>{const r=i.map(s=>s.producto).filter((s,d,k)=>d===k.findIndex($=>$.id===s.id)),a=t.filter(s=>!r.some(d=>d.id===s.id));this.dataprod=a})})}guardar(n){this.seguridadService.CrearSugerencia({producto:this.selectedOptionProd,inventario:this.selectedOptionInvent,descripcion:n.value.descripcion,user:this.seguridadService.getCookie("username")??"nada"})}static#e=this.\u0275fac=function(t){return new(t||v)(e.Y36(O.F))};static#t=this.\u0275cmp=e.Xpm({type:v,selectors:[["app-CrearInventario"]],decls:26,vars:5,consts:[[1,"flex","justify-center","items-center","h-screen"],[1,"max-w-md","w-full"],[1,"shadow-md","rounded","px-8","pt-6","pb-8","mb-4"],[1,"titulo-grande"],[1,"flex","flex-col","items-center",3,"ngSubmit"],["f","ngForm"],[1,"w-full",2,"width","200px"],["placeholder","Opciones entrada",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Opciones productos",3,"value","valueChange"],[1,"mb-4","w-full"],[1,"w-full"],["matInput","","type","text","placeholder","Ingrese Descripci\xf3n","ngModel","","name","descripcion","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline"],[1,"flex","items-center","justify-center"],["mat-raised-button","","color","primary","type","submit",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"disabled"],[3,"value"]],template:function(t,i){if(1&t){const r=e.EpF();e.TgZ(0,"section",0)(1,"div",1)(2,"mat-card",2)(3,"div")(4,"h1",3),e._uU(5,"Crear Sugerencia"),e.qZA()(),e.TgZ(6,"form",4,5),e.NdJ("ngSubmit",function(){e.CHM(r);const s=e.MAs(7);return e.KtG(i.guardar(s))}),e.TgZ(8,"div")(9,"mat-form-field",6)(10,"mat-select",7),e.NdJ("valueChange",function(s){return i.selectedOptionInvent=s})("selectionChange",function(){return i.onInvListChange()}),e.YNc(11,E,2,2,"mat-option",8),e.qZA()()(),e.TgZ(12,"div")(13,"mat-form-field",6)(14,"mat-select",9),e.NdJ("valueChange",function(s){return i.selectedOptionProd=s}),e.YNc(15,Y,2,2,"mat-option",8),e.qZA()()(),e.TgZ(16,"div",10)(17,"mat-form-field",11)(18,"mat-label"),e._uU(19,"Descripci\xf3n"),e.qZA(),e._UZ(20,"input",12),e.TgZ(21,"mat-error"),e._uU(22,"Ingrese una descripci\xf3n"),e.qZA()()(),e.TgZ(23,"div",13)(24,"button",14),e._uU(25," Guardar "),e.qZA()()()()()()}if(2&t){const r=e.MAs(7);e.xp6(10),e.Q6J("value",i.selectedOptionInvent),e.xp6(1),e.Q6J("ngForOf",i.datainv),e.xp6(3),e.Q6J("value",i.selectedOptionProd),e.xp6(1),e.Q6J("ngForOf",i.dataprod),e.xp6(9),e.Q6J("disabled",!i.selectedOptionProd&&!i.selectedOptionInvent||r.invalid)}},dependencies:[u.sg,g.lW,w.Nt,h.KE,h.hX,h.TO,Q.a8,x.gD,T.ey,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.On,c.F],styles:["mat-icon-button[_ngcontent-%COMP%]{position:absolute;right:0;top:50%;transform:translateY(-50%)}.password-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.password-input[_ngcontent-%COMP%]{width:calc(100% - 48px);height:100%;padding:0 12px}.visibility-toggle[_ngcontent-%COMP%]{position:absolute;right:0;top:0;width:48px;height:100%;display:flex;align-items:center;justify-content:center;padding:0}"]})}const D=[{path:"",children:[{path:"user",component:m},{path:"admin",component:_},{path:"crear",component:v},{path:"**",redirectTo:"login"}]}];class b{static#e=this.\u0275fac=function(t){return new(t||b)};static#t=this.\u0275mod=e.oAB({type:b});static#n=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(D),p.Bz]})}var j=l(381);class C{static#e=this.\u0275fac=function(t){return new(t||C)};static#t=this.\u0275mod=e.oAB({type:C});static#n=this.\u0275inj=e.cJS({imports:[u.ez,b,j.q,c.u5]})}}}]);