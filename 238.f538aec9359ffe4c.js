"use strict";(self.webpackChunkmi_web_app=self.webpackChunkmi_web_app||[]).push([[238],{4495:(U,h,i)=>{i.r(h),i.d(h,{ReporteRModule:()=>u});var p=i(6895),m=i(9299),t=i(4650),f=i(4859),g=i(5412);function v(a,e){}class l{constructor(){}static#t=this.\u0275fac=function(o){return new(o||l)};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-borrar"]],decls:13,vars:2,consts:[[1,"p-4"],[1,"text-xl","font-semibold","mb-4"],[1,"botones-container"],[1,"text-center","text-2xl","font-bold","mb-8"],["mat-button","",3,"mat-dialog-close"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"],["noFile",""]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Borrar Inventario"),t.qZA(),t.TgZ(3,"div",2)(4,"h3",3),t._uU(5,"\xbfSeguro que quieres borrar el inventaro?"),t.qZA(),t.TgZ(6,"mat-dialog-actions")(7,"button",4),t._uU(8,"No"),t.qZA(),t.TgZ(9,"button",5),t._uU(10,"Si"),t.qZA()(),t.YNc(11,v,0,0,"ng-template",null,6,t.W1O),t.qZA()()),2&o&&(t.xp6(7),t.Q6J("mat-dialog-close",!1),t.xp6(2),t.Q6J("mat-dialog-close",!0))},dependencies:[f.lW,g.ZT,g.H8],styles:['@charset "UTF-8";.custom-primary-button[_ngcontent-%COMP%]{background-color:#005e6e;color:#fff;font-weight:700;padding:.5rem 1rem;border-radius:.25rem;margin-left:10px}.botones-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.botones-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-bottom:10px}']})}var b=i(4410),O=i(9549),Z=i(4385),_=i(3238);function C(a,e){if(1&a&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&a){const o=e.$implicit;t.Q6J("value",o.value),t.xp6(1),t.hij(" ",o.label," ")}}function T(a,e){if(1&a&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&a){const o=e.$implicit;t.Q6J("value",o.id),t.xp6(1),t.hij(" ",o.nombre," ")}}function x(a,e){if(1&a){const o=t.EpF();t.TgZ(0,"div")(1,"mat-form-field",3)(2,"mat-select",11),t.NdJ("valueChange",function(r){t.CHM(o);const s=t.oxw();return t.KtG(s.selectedOption2=r)}),t.YNc(3,T,2,2,"mat-option",5),t.qZA()()()}if(2&a){const o=t.oxw();t.xp6(2),t.Q6J("value",o.selectedOption2),t.xp6(1),t.Q6J("ngForOf",o.data2)}}function A(a,e){if(1&a&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td"),t._uU(16),t.qZA()()),2&a){const o=e.$implicit;let n,r,s;t.xp6(2),t.Oqu(o.id),t.xp6(2),t.Oqu(o.cantidadActual),t.xp6(2),t.Oqu(o.cantidad),t.xp6(2),t.Oqu(o.descripcion),t.xp6(2),t.Oqu(o.fecha),t.xp6(2),t.Oqu(null!==(n=null==o.inventarioEnt?null:o.inventarioEnt.nombre)&&void 0!==n?n:"N/A"),t.xp6(2),t.Oqu(null!==(r=null==o.inventarioSal?null:o.inventarioSal.nombre)&&void 0!==r?r:"N/A"),t.xp6(2),t.Oqu(null!==(s=null==o.producto?null:o.producto.nombre)&&void 0!==s?s:"N/A")}}class d{constructor(e,o,n){this.seguridadService=e,this.router=o,this.dialog=n,this.options=[{value:0,label:"Todo"},{value:1,label:"Producto"},{value:2,label:"Inventario Entrada"},{value:3,label:"Inventario Salida"}],this.selectedOption=-1,this.selectedOption2=0,this.data=[],this.data2=[],this.filteredOptions=[]}ngOnInit(){this.seguridadService.mantenerSecion(),this.seguridadService.tieneprivilegio(),this.seguridadService.obtenerReporte().subscribe(e=>{this.data=e},e=>{console.error("Error obteniendo data:",e)})}onFirstListChange(){this.filteredOptions=[],1===this.selectedOption?this.data.forEach(e=>{null!==e.product&&this.filteredOptions.push(e.producto)}):2===this.selectedOption?this.data.forEach(e=>{null!==e.inventarioEnt&&this.filteredOptions.push(e.inventarioEnt)}):3===this.selectedOption&&this.data.forEach(e=>{null!==e.inventarioSal&&this.filteredOptions.push(e.inventarioSal)}),this.filteredOptions=Array.from(new Set(this.filteredOptions.map(e=>e.id))).map(e=>this.filteredOptions.find(o=>o.id===e)),this.data2=this.filteredOptions}actualizarLista(){0==this.selectedOption?this.seguridadService.obtenerReporte().subscribe(e=>{this.data=e},e=>{console.error("Error obteniendo data:",e)}):1==this.selectedOption?this.seguridadService.obtenerReporteProducto({id:this.selectedOption2,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(e=>{this.data=e},e=>{console.error("Error obteniendo data:",e)}):2==this.selectedOption?this.seguridadService.obtenerReporteInvEnt({id:this.selectedOption2,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(e=>{this.data=e},e=>{console.error("Error obteniendo data:",e)}):3==this.selectedOption&&this.seguridadService.obtenerReporteInvSal({id:this.selectedOption2,user:this.seguridadService.getCookie("username")??"nada"}).subscribe(e=>{this.data=e},e=>{console.error("Error obteniendo data:",e)})}openConfirmarDialog(e){this.dialog.open(l).afterClosed().subscribe(n=>{n&&(this.seguridadService.BorrarInventario({id:e,user:this.seguridadService.getCookie("username")??"nada"}),window.location.reload())})}static#t=this.\u0275fac=function(o){return new(o||d)(t.Y36(b.F),t.Y36(m.F0),t.Y36(g.uw))};static#e=this.\u0275cmp=t.Xpm({type:d,selectors:[["app-reporte"]],decls:33,vars:4,consts:[[1,"p-4"],[1,"text-xl","font-semibold","mb-4"],[1,"table-container"],[1,"w-full",2,"width","200px"],["placeholder","Opciones",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex"],["mat-raised-button","","color","primary","type","submit",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[4,"ngFor","ngForOf"],[3,"value"],["placeholder","Opciones",3,"value","valueChange"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Reportes"),t.qZA(),t.TgZ(3,"div",2)(4,"div")(5,"mat-form-field",3)(6,"mat-select",4),t.NdJ("valueChange",function(s){return n.selectedOption=s})("selectionChange",function(){return n.onFirstListChange()}),t.YNc(7,C,2,2,"mat-option",5),t.qZA()()(),t.YNc(8,x,4,2,"div",6),t.TgZ(9,"div",7)(10,"button",8),t.NdJ("click",function(){return n.actualizarLista()}),t._uU(11," Buscar "),t.qZA()(),t.TgZ(12,"table")(13,"thead")(14,"tr")(15,"th"),t._uU(16,"C\xf3digo"),t.qZA(),t.TgZ(17,"th"),t._uU(18,"Cantidad actual"),t.qZA(),t.TgZ(19,"th"),t._uU(20,"Cantidad de cambio"),t.qZA(),t.TgZ(21,"th"),t._uU(22,"Descripci\xf3n"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Fecha"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Nombre inventario de salida"),t.qZA(),t.TgZ(27,"th"),t._uU(28,"Nombre inventario de entrada"),t.qZA(),t.TgZ(29,"th"),t._uU(30,"Nombre del producto"),t.qZA()()(),t.TgZ(31,"tbody"),t.YNc(32,A,17,8,"tr",9),t.qZA()()()()),2&o&&(t.xp6(6),t.Q6J("value",n.selectedOption),t.xp6(1),t.Q6J("ngForOf",n.options),t.xp6(1),t.Q6J("ngIf",n.selectedOption>0&&null!==n.selectedOption),t.xp6(24),t.Q6J("ngForOf",n.data))},dependencies:[p.sg,p.O5,f.lW,O.KE,Z.gD,_.ey],styles:[".primary-color[_ngcontent-%COMP%]{color:#005e6e}.border-color[_ngcontent-%COMP%]{border-color:#005e6e}.titulo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}table[_ngcontent-%COMP%]{border-collapse:collapse}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f2f2f2}td[_ngcontent-%COMP%]{background-color:#fff}"]})}const q=[{path:"",component:d}];class c{static#t=this.\u0275fac=function(o){return new(o||c)};static#e=this.\u0275mod=t.oAB({type:c});static#o=this.\u0275inj=t.cJS({imports:[m.Bz.forChild(q),m.Bz]})}var S=i(381);class u{static#t=this.\u0275fac=function(o){return new(o||u)};static#e=this.\u0275mod=t.oAB({type:u});static#o=this.\u0275inj=t.cJS({imports:[p.ez,c,S.q]})}}}]);